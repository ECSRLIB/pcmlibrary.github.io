<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PCM Library | ECSR Lab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .sidebar {
            height: calc(100vh - 60px);
            overflow-y: auto;
        }
        .main-content {
            height: calc(100vh - 60px);
            overflow-y: auto;
        }
        .pcm-list-item {
            background-color: white;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
        }
        .pcm-list-item:hover {
            transform: translateY(-3px);
        }
        /* Animation for visitor counter */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        .visitor-counter {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-gray-900 text-white p-4 flex justify-between items-center">
        <div class="flex items-center space-x-4">
            <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/093a6a8c-95c7-4cf6-8aeb-48450ba2d195.png" alt="ECSR Lab circular logo with blue and white design showing thermofluid research symbol" class="rounded-full h-8 w-8">
            <h1 class="text-xl font-bold">PCM Library</h1>
        </div>
        <div class="flex items-center space-x-4">
            <span class="text-sm bg-blue-600 px-3 py-1 rounded-full visitor-counter">
                <i class="fas fa-users mr-1"></i>
                <span id="visitorCount">0</span> visitors
            </span>
            <span class="text-sm text-gray-300">
                Research Area: <span class="font-semibold">Thermofluids</span>
            </span>
        </div>
    </header>

    <div class="flex">
        <!-- Sidebar -->
        <aside class="w-64 bg-gray-800 text-white sidebar p-4">
            <div class="mb-6">
                <h2 class="text-lg font-semibold mb-2">Search PCM</h2>
                <input type="text" id="searchInput" placeholder="Search by name or property..." 
                       class="w-full px-3 py-2 rounded bg-gray-700 text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>
            
            <div class="mb-6">
                <h2 class="text-lg font-semibold mb-2">Filters</h2>
                
                <div class="mb-4">
                    <h3 class="font-medium mb-1">PCM Type</h3>
                    <div class="space-y-1">
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" class="pcm-type" value="organic" checked>
                            <span>Organic</span>
                        </label>
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" class="pcm-type" value="inorganic" checked>
                            <span>Inorganic</span>
                        </label>
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" class="pcm-type" value="salt" checked>
                            <span>Salt Hydrate</span>
                        </label>
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" class="pcm-type" value="eutectic" checked>
                            <span>Eutectic</span>
                        </label>
                    </div>
                </div>
                
                <div class="mb-4">
                    <h3 class="font-medium mb-1">Temperature Range (°C)</h3>
                    <div class="flex space-x-2 mb-2">
                        <input type="number" id="tempMin" placeholder="Min" 
                               class="w-1/2 px-2 py-1 rounded bg-gray-700 text-white">
                        <input type="number" id="tempMax" placeholder="Max" 
                               class="w-1/2 px-2 py-1 rounded bg-gray-700 text-white">
                    </div>
                </div>
                
                <div class="mb-4">
                    <h3 class="font-medium mb-1">Latent Heat (kJ/kg)</h3>
                    <input type="number" id="latentHeat" placeholder="Min latent heat" 
                           class="w-full px-2 py-1 rounded bg-gray-700 text-white">
                </div>
                
                <button id="applyFilters" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded">
                    Apply Filters
                </button>
            </div>
            
            <div class="mt-8 pt-4 border-t border-gray-700">
                <h2 class="text-lg font-semibold mb-2">Credits</h2>
                <p class="text-sm mb-1"><span class="font-medium">Creator:</span> Sonu Singh</p>
                <p class="text-sm"><span class="font-medium">Supervisor:</span> Dr. Shobhana Singh</p>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 bg-gray-100 main-content p-6">
            <div class="mb-6 flex justify-between items-center">
                <div>
                    <h2 class="text-2xl font-bold text-gray-800">PCM Database</h2>
                    <p id="pcmCount" class="text-sm text-gray-500">0 PCMs found</p>
                </div>
                <div class="flex items-center space-x-2">
                    <select id="sortBy" class="px-3 py-2 rounded border border-gray-300 bg-white">
                        <option value="name" selected>Sort by Name</option>
                        <option value="temp">Sort by Temp (Low-High)</option>
                        <option value="heat">Sort by Heat (High-Low)</option>
                    </select>
                    <button id="sortBtn" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                        Sort
                    </button>
                </div>
            </div>
            
            <div id="pcmContainer" class="space-y-4">
                <!-- PCM list items will be dynamically inserted here -->
            </div>
            
            <div id="noResults" class="hidden text-center py-10">
                <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/70991187-ca97-4d5c-b304-2434854380bb.png" alt="No results found illustration with magnifying glass and document with question mark" class="mx-auto mb-4">
                <h3 class="text-xl font-semibold text-gray-700">No PCMs found matching your criteria</h3>
                <p class="text-gray-500">Try adjusting your search or filters</p>
            </div>
        </main>
    </div>

    <script>
        // Sample PCM data (in a real app, this would come from a backend API)
        const pcmData = [
            {
                id: 1,
                name: "n-Dodecane", 
                type: "organic",
                tempMin: -12,
                tempMax: -12,
                latentHeat: 216,
                description: "Organic PCM with melting point of -12°C",
                chemicalFormula: "C12H26"
            },
            {
                id: 2,
                name: "n-Tridecane",
                type: "organic",
                tempMin: -6,
                tempMax: -6,
                latentHeat: "NaN",
                description: "Organic PCM with melting point of -6°C",
                chemicalFormula: "C13H28"
            },
            {
                id: 3,
                name: "n-Tetradecane",
                type: "organic",
                tempMin: 4.5,
                tempMax: 5.6,
                latentHeat: 231,
                description: "Organic PCM with specific thermal properties.",
                chemicalFormula: "C14H30"
            },
            {
                id: 4,
                name: "n-Pentadecane",
                type: "organic",
                tempMin: 10,
                tempMax: 10,
                latentHeat: 207,
                description: "Organic PCM with specific thermal properties.",
                chemicalFormula: "C15H32"
            },
            {
                id: 5,
                name: "n-Hexadecane",
                type: "organic",
                tempMin: 18.2,
                tempMax: 18.2,
                latentHeat: 238,
                description: "Organic PCM with specific thermal properties.",
                chemicalFormula: "C16H34"
            },
            {
                id: 6,
                name: "n-Heptadecane",
                type: "organic",
                tempMin: 22,
                tempMax: 22,
                latentHeat: 215,
                description: "Organic PCM with specific thermal properties.",
                chemicalFormula: "C17H36"
            },
            {
                id: 7,
                name: "n-Octadecane",
                type: "organic",
                tempMin: 28.2,
                tempMax: 28.2,
                latentHeat: 245,
                description: "Organic PCM with specific thermal properties.",
                chemicalFormula: "C18H38"
            },
            {
                id: 8,
                name: "n-Nonadecane",
                type: "organic",
                tempMin: 31.9,
                tempMax: 31.9,
                latentHeat: 222,
                description: "Organic PCM with specific thermal properties.",
                chemicalFormula: "C19H40"
            },
            {
                id: 9,
                name: "n-Eicosane",
                type: "organic",
                tempMin: 37,
                tempMax: 37,
                latentHeat: 247,
                description: "Organic PCM with specific thermal properties.",
                chemicalFormula: "C20H42"
            },
            {
                id: 10,
                name: "n-Heneicosane",
                type: "organic",
                tempMin: 41,
                tempMax: 41,
                latentHeat: 215,
                description: "Organic PCM with specific thermal properties.",
                chemicalFormula: "C21H44"
            },
            {
                id: 11,
                name: "n-Docosane",
                type: "organic",
                tempMin: 44,
                tempMax: 44,
                latentHeat: 249,
                description: "Organic PCM with specific thermal properties.",
                chemicalFormula: "C22H46"
            },
            {
                id: 12,
                name: "n-Tricosane",
                type: "organic",
                tempMin: 47,
                tempMax: 47,
                latentHeat: 234,
                description: "Organic PCM with specific thermal properties.",
                chemicalFormula: "C23H48"
            },
            {
                id: 13,
                name: "n-Tetracosane",
                type: "organic",
                tempMin: 51,
                tempMax: 51,
                latentHeat: 255,
                description: "Organic PCM with specific thermal properties.",
                chemicalFormula: "C24H50"
            },
            {
                id: 14,
                name: "n-Pentacosane",
                type: "organic",
                tempMin: 54,
                tempMax: 54,
                latentHeat: 238,
                description: "Organic PCM with specific thermal properties.",
                chemicalFormula: "C25H52"
            },
            {
                id: 15,
                name: "n-Hexacosane",
                type: "organic",
                tempMin: 56,
                tempMax: 56,
                latentHeat: 257,
                description: "Organic PCM with specific thermal properties.",
                chemicalFormula: "C26H54"
            },
            {
                id: 16,
                name: "n-Heptacosane",
                type: "organic",
                tempMin: 59,
                tempMax: 59,
                latentHeat: 236,
                description: "Organic PCM with specific thermal properties.",
                chemicalFormula: "C27H56"
            },
            {
                id: 17,
                name: "n-Octacosane",
                type: "organic",
                tempMin: 61,
                tempMax: 61,
                latentHeat: 255,
                description: "Organic PCM with specific thermal properties.",
                chemicalFormula: "C28H58"
            },
            {
                id: 18,
                name: "n-Nonacosane",
                type: "organic",
                tempMin: 64,
                tempMax: 64,
                latentHeat: 240,
                description: "Organic PCM with specific thermal properties.",
                chemicalFormula: "C29H60"
            },
            {
                id: 19,
                name: "n-Triacontane",
                type: "organic",
                tempMin: 65,
                tempMax: 65,
                latentHeat: 252,
                description: "Organic PCM with specific thermal properties.",
                chemicalFormula: "C30H62"
            },
            {
                id: 20,
                name: "n-Hentriacontane",
                type: "organic",
                tempMin: 68,
                tempMax: 68,
                latentHeat: 242,
                description: "Organic PCM with specific thermal properties.",
                chemicalFormula: "C31H64"
            },
            {
                id: 21,
                name: "n-Dotricontane",
                type: "organic",
                tempMin: 70,
                tempMax: 70,
                latentHeat: 170,
                description: "Organic PCM with specific thermal properties.",
                chemicalFormula: "C32H66"
            },
            {
                id: 22,
                name: "n-Tritricontane",
                type: "organic",
                tempMin: 71,
                tempMax: 71,
                latentHeat: 189,
                description: "Organic PCM with specific thermal properties.",
                chemicalFormula: "C33H68"
            },
            {
                id: 23,
                name: "n-Tetratriacontane",
                type: "organic",
                tempMin: 75.9,
                tempMax: 75.9,
                latentHeat: 269,
                description: "Organic PCM with specific thermal properties.",
                chemicalFormula: "C34H70"
            }
        ];

        // DOM Elements
        const pcmContainer = document.getElementById('pcmContainer');
        const searchInput = document.getElementById('searchInput');
        const typeCheckboxes = document.querySelectorAll('.pcm-type');
        const tempMinInput = document.getElementById('tempMin');
        const tempMaxInput = document.getElementById('tempMax');
        const latentHeatInput = document.getElementById('latentHeat');
        const applyFiltersBtn = document.getElementById('applyFilters');
        const sortBy = document.getElementById('sortBy');
        const sortBtn = document.getElementById('sortBtn');
        const noResults = document.getElementById('noResults');
        const visitorCount = document.getElementById('visitorCount');

        // Initialize visitor count (simulated)
        let visitors = localStorage.getItem('pcmLibraryVisitors') || 0;
        visitors = parseInt(visitors) + 1;
        localStorage.setItem('pcmLibraryVisitors', visitors);
        visitorCount.textContent = visitors.toLocaleString();

        // Display PCM list items
        function displayPCMs(pcms) {
            pcmContainer.innerHTML = '';
            const pcmCountElement = document.getElementById('pcmCount');
            noResults.classList.add('hidden');

            // Always show count of matched PCMs
            pcmCountElement.textContent = `${pcms.length} PCM${pcms.length !== 1 ? 's' : ''} matched`;
            
            // If no PCMs matched filters or no filters are applied, show message
            if (!pcms || pcms.length === 0) {
                noResults.classList.remove('hidden');
                pcmContainer.innerHTML = '<div class="text-center py-20 text-gray-500">No PCMs match your filters</div>';
                return;
            }
            
            pcms.forEach(pcm => {
                const listItem = document.createElement('div');
                listItem.className = 'pcm-list-item';
                
                listItem.innerHTML = `
                    <h3 class="text-lg font-bold text-gray-800">${pcm.name}</h3>
                    <span class="text-xs text-gray-500">${pcm.type.charAt(0).toUpperCase() + pcm.type.slice(1)}</span>
                    <p class="text-gray-600 text-sm mb-2">${pcm.description}</p>
                    <div class="grid grid-cols-3 gap-4 text-sm">
                        <div>
                            <span class="font-medium">Temperature:</span>
                            <span>${pcm.tempMin}°C - ${pcm.tempMax}°C</span>
                        </div>
                        <div>
                            <span class="font-medium">Latent Heat:</span>
                            <span>${pcm.latentHeat} kJ/kg</span>
                        </div>
                        <div>
                            <span class="font-medium">Formula:</span>
                            <span>${pcm.chemicalFormula || 'N/A'}</span>
                        </div>
                    </div>
                `;
                
                pcmContainer.appendChild(listItem);
            });
        }

        // Filter PCMS based on search and filter criteria
        function filterPCMS() {
            const searchTerm = searchInput.value.toLowerCase();
            const selectedTypes = Array.from(typeCheckboxes)
                .filter(checkbox => checkbox
