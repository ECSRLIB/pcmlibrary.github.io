<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PCM Library | ECSR Lab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .sidebar {
            height: calc(100vh - 60px);
            overflow-y: auto;
        }
        .main-content {
            height: calc(100vh - 60px);
            overflow-y: auto;
        }
        .table-container {
            overflow-x: auto;
        }
        .visitor-counter {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-gray-900 text-white p-4 flex justify-between items-center">
        <div class="flex items-center space-x-4">
            <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/093a6a8c-95c7-4cf6-8aeb-48450ba2d195.png" alt="ECSR Lab circular logo with blue and white design showing thermofluid research symbol" class="rounded-full h-8 w-8">
            <h1 class="text-xl font-bold">PCM Library</h1>
        </div>
        <div class="flex items-center space-x-4">
            <span class="text-sm bg-blue-600 px-3 py-1 rounded-full visitor-counter">
                <i class="fas fa-users mr-1"></i>
                <span id="visitorCount">0</span> visitors
            </span>
            <span class="text-sm text-gray-300">
                Research Area: <span class="font-semibold">Thermofluids</span>
            </span>
        </div>
    </header>

    <div class="flex">
        <!-- Sidebar -->
        <aside class="w-64 bg-gray-800 text-white sidebar p-4">
            <div class="mb-6">
                <h2 class="text-lg font-semibold mb-2">Search PCM</h2>
                <input type="text" id="searchInput" placeholder="Search by name..." 
                       class="w-full px-3 py-2 rounded bg-gray-700 text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>
            
            <div class="mb-6">
                <h2 class="text-lg font-semibold mb-2">Filters</h2>
                
                <div class="mb-4">
                    <h3 class="font-medium mb-1">PCM Type</h3>
                    <div class="space-y-1">
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" class="pcm-type" value="Organic" checked>
                            <span>Organic</span>
                        </label>
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" class="pcm-type" value="Inorganic" checked>
                            <span>Inorganic</span>
                        </label>
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" class="pcm-type" value="Salt Hydrate" checked>
                            <span>Salt Hydrate</span>
                        </label>
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" class="pcm-type" value="Eutectic" checked>
                            <span>Eutectic</span>
                        </label>
                    </div>
                </div>

                <div class="mb-4">
                    <h3 class="font-medium mb-1">Temperature Range (°C)</h3>
                    <div class="flex space-x-2 mb-2">
                        <input type="number" id="tempMin" placeholder="Min" 
                               class="w-1/2 px-2 py-1 rounded bg-gray-700 text-white">
                        <input type="number" id="tempMax" placeholder="Max" 
                               class="w-1/2 px-2 py-1 rounded bg-gray-700 text-white">
                    </div>
                </div>
                
                <div class="mb-4">
                    <h3 class="font-medium mb-1">Latent Heat (kJ/kg)</h3>
                    <div class="flex space-x-2 mb-2">
                        <input type="number" id="latentHeatMin" placeholder="Min latent heat" 
                               class="w-1/2 px-2 py-1 rounded bg-gray-700 text-white">
                        <input type="number" id="latentHeatMax" placeholder="Max latent heat" 
                               class="w-1/2 px-2 py-1 rounded bg-gray-700 text-white">
                    </div>
                </div>
                
                <button id="applyFilters" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded">
                    Apply Filters
                </button>
            </div>
            
            <div class="mt-8 pt-4 border-t border-gray-700">
                <h2 class="text-lg font-semibold mb-2">Credits</h2>
                <p class="text-sm mb-1"><span class="font-medium">Creator:</span> Sonu Singh</p>
                <p class="text-sm"><span class="font-medium">Supervisor:</span> Dr. Shobhana Singh</p>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 bg-gray-100 main-content p-6">
            <div class="mb-6 flex justify-between items-center">
                <div>
                    <h2 class="text-2xl font-bold text-gray-800">PCM Database</h2>
                    <p id="pcmCount" class="text-sm text-gray-500">0 PCMs found</p>
                </div>
                <div class="flex items-center space-x-2">
                    <select id="sortBy" class="px-3 py-2 rounded border border-gray-300 bg-white">
                        <option value="name" selected>Sort by Name</option>
                        <option value="temp">Sort by Temp (Low-High)</option>
                        <option value="heat">Sort by Heat (High-Low)</option>
                    </select>
                    <button id="sortBtn" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                        Sort
                    </button>
                </div>
            </div>
            
            <div class="table-container">
                <table class="min-w-full bg-white border border-gray-300">
                    <thead>
                        <tr>
                            <th class="py-2 px-4 border-b">PCM Name</th>
                            <th class="py-2 px-4 border-b">PCM Type</th>
                            <th class="py-2 px-4 border-b">Temperature (°C)</th>
                            <th class="py-2 px-4 border-b">Heat of Fusion (kJ/kg)</th>
                            <th class="py-2 px-4 border-b">Heat Capacity (Solid) (kJ/kgK)</th>
                            <th class="py-2 px-4 border-b">Heat Capacity (Liquid) (kJ/kgK)</th>
                            <th class="py-2 px-4 border-b">Density (Solid) (kg/m³)</th>
                            <th class="py-2 px-4 border-b">Density (Liquid) (kg/m³)</th>
                            <th class="py-2 px-4 border-b">Expansivity (Solid) (x10⁻⁶ m³/m³)</th>
                            <th class="py-2 px-4 border-b">Energy Density (kJ/m³)</th>
                        </tr>
                    </thead>
                    <tbody id="pcmTableBody">
                        <!-- PCM data will be dynamically inserted here -->
                    </tbody>
                </table>
            </div>
            
            <div id="noResults" class="hidden text-center py-10">
                <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/70991187-ca97-4d5c-b304-2434854380bb.png" alt="No results found illustration" class="mx-auto mb-4">
                <h3 class="text-xl font-semibold text-gray-700">No PCMs found matching your criteria</h3>
                <p class="text-gray-500">Try adjusting your search or filters</p>
            </div>
        </main>
    </div>

    <script>
        // Expanded PCM data with various types
        const pcmData = [
            {
                id: 1,
                name: "Paraffin Wax",
                type: "Organic",
                tempMin: 40,
                tempMax: 60,
                heatOfFusion: 200,
                heatCapacitySolid: 2.1,
                heatCapacityLiquid: 2.5,
                densitySolid: 900,
                densityLiquid: 800,
                expansivity: 0.5,
                energyDensity: 180
            },
            {
                id: 2,
                name: "Sodium Acetate Trihydrate",
                type: "Salt Hydrate",
                tempMin: 58,
                tempMax: 58,
                heatOfFusion: 264,
                heatCapacitySolid: 2.7,
                heatCapacityLiquid: 3.0,
                densitySolid: 1450,
                densityLiquid: 1200,
                expansivity: 0.6,
                energyDensity: 320
            },
            {
                id: 3,
                name: "Calcium Nitrate Tetrahydrate",
                type: "Salt Hydrate",
                tempMin: 43,
                tempMax: 47,
                heatOfFusion: 174,
                heatCapacitySolid: 1.8,
                heatCapacityLiquid: 2.2,
                densitySolid: 1500,
                densityLiquid: 1300,
                expansivity: 0.4,
                energyDensity: 250
            },
            {
                id: 4,
                name: "Magnesium Sulphate Heptahydrate",
                type: "Salt Hydrate",
                tempMin: 48,
                tempMax: 48,
                heatOfFusion: 251,
                heatCapacitySolid: 2.0,
                heatCapacityLiquid: 2.4,
                densitySolid: 1500,
                densityLiquid: 1300,
                expansivity: 0.5,
                energyDensity: 300
            },
            {
                id: 5,
                name: "Potassium Chloride Dihydrate",
                type: "Salt Hydrate",
                tempMin: 25,
                tempMax: 25,
                heatOfFusion: 200,
                heatCapacitySolid: 1.5,
                heatCapacityLiquid: 1.8,
                densitySolid: 1700,
                densityLiquid: 1500,
                expansivity: 0.3,
                energyDensity: 220
            },
            {
                id: 6,
                name: "Lithium Bromide Dihydrate",
                type: "Salt Hydrate",
                tempMin: 34,
                tempMax: 34,
                heatOfFusion: 180,
                heatCapacitySolid: 1.6,
                heatCapacityLiquid: 2.0,
                densitySolid: 2000,
                densityLiquid: 1800,
                expansivity: 0.4,
                energyDensity: 260
            },
            {
                id: 7,
                name: "Eutectic Mixture",
                type: "Eutectic",
                tempMin: 20,
                tempMax: 30,
                heatOfFusion: 150,
                heatCapacitySolid: 2.0,
                heatCapacityLiquid: 2.5,
                densitySolid: 950,
                densityLiquid: 850,
                expansivity: 0.4,
                energyDensity: 200
            },
            {
                id: 8,
                name: "Sodium Sulfate Decahydrate",
                type: "Salt Hydrate",
                tempMin: 32,
                tempMax: 32,
                heatOfFusion: 251,
                heatCapacitySolid: 2.1,
                heatCapacityLiquid: 2.4,
                densitySolid: 1500,
                densityLiquid: 1300,
                expansivity: 0.5,
                energyDensity: 300
            },
            {
                id: 9,
                name: "Stearic Acid",
                type: "Organic",
                tempMin: 50,
                tempMax: 70,
                heatOfFusion: 200,
                heatCapacitySolid: 2.5,
                heatCapacityLiquid: 2.9,
                densitySolid: 800,
                densityLiquid: 750,
                expansivity: 0.6,
                energyDensity: 180
            },
            {
                id: 10,
                name: "Sorbitol",
                type: "Organic",
                tempMin: 60,
                tempMax: 80,
                heatOfFusion: 210,
                heatCapacitySolid: 2.3,
                heatCapacityLiquid: 2.7,
                densitySolid: 900,
                densityLiquid: 850,
                expansivity: 0.5,
                energyDensity: 190
            }
            {
                id: 11,
                name: "Sonu",
                type: "Organic",
                tempMin: 1000,
                tempMax: 8000,
                heatOfFusion: 210,
                heatCapacitySolid: 2.3,
                heatCapacityLiquid: 2.7,
                densitySolid: 900,
                densityLiquid: 850,
                expansivity: 0.5,
                energyDensity: 190
            }

        ];

        // DOM Elements
        const pcmTableBody = document.getElementById('pcmTableBody');
        const searchInput = document.getElementById('searchInput');
        const tempMinInput = document.getElementById('tempMin');
        const tempMaxInput = document.getElementById('tempMax');
        const latentHeatMinInput = document.getElementById('latentHeatMin');
        const latentHeatMaxInput = document.getElementById('latentHeatMax');
        const applyFiltersBtn = document.getElementById('applyFilters');
        const sortBy = document.getElementById('sortBy');
        const sortBtn = document.getElementById('sortBtn');
        const noResults = document.getElementById('noResults');
        const typeCheckboxes = document.querySelectorAll('.pcm-type');
        const pcmCount = document.getElementById('pcmCount');

        // Display PCM list items in table format
        function displayPCMs(pcms) {
            pcmTableBody.innerHTML = '';
            noResults.classList.add('hidden');

            // Update the PCM count
            pcmCount.textContent = `${pcms.length} PCMs found`;

            // If no PCMs matched filters or no filters are applied, show message
            if (!pcms || pcms.length === 0) {
                noResults.classList.remove('hidden');
                return;
            }
            
            pcms.forEach(pcm => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="py-2 px-4 border-b">${pcm.name}</td>
                    <td class="py-2 px-4 border-b">${pcm.type}</td>
                    <td class="py-2 px-4 border-b">${pcm.tempMin} - ${pcm.tempMax} °C</td>
                    <td class="py-2 px-4 border-b">${pcm.heatOfFusion} kJ/kg</td>
                    <td class="py-2 px-4 border-b">${pcm.heatCapacitySolid} kJ/kgK</td>
                    <td class="py-2 px-4 border-b">${pcm.heatCapacityLiquid} kJ/kgK</td>
                    <td class="py-2 px-4 border-b">${pcm.densitySolid} kg/m³</td>
                    <td class="py-2 px-4 border-b">${pcm.densityLiquid} kg/m³</td>
                    <td class="py-2 px-4 border-b">${pcm.expansivity} x10⁻⁶ m³/m³</td>
                    <td class="py-2 px-4 border-b">${pcm.energyDensity} kJ/m³</td>
                `;
                pcmTableBody.appendChild(row);
            });
        }

        // Filter PCMS based on search and filter criteria
        function filterPCMS() {
            const searchTerm = searchInput.value.toLowerCase();
            const minTemp = parseFloat(tempMinInput.value) || -Infinity;
            const maxTemp = parseFloat(tempMaxInput.value) || Infinity;
            const minLatentHeat = parseFloat(latentHeatMinInput.value) || -Infinity;
            const maxLatentHeat = parseFloat(latentHeatMaxInput.value) || Infinity;

            const selectedTypes = Array.from(typeCheckboxes)
                .filter(checkbox => checkbox.checked)
                .map(checkbox => checkbox.value);

            return pcmData.filter(pcm => {
                const matchesSearch = pcm.name.toLowerCase().includes(searchTerm);
                const matchesTemp = (pcm.tempMin >= minTemp && pcm.tempMax <= maxTemp);
                const matchesHeat = (pcm.heatOfFusion >= minLatentHeat && pcm.heatOfFusion <= maxLatentHeat);
                const matchesType = selectedTypes.length === 0 || selectedTypes.includes(pcm.type);

                return matchesSearch && matchesTemp && matchesHeat && matchesType;
            });
        }

        // Sort PCMs
        function sortPCMS(pcms, sortByValue) {
            return [...pcms].sort((a, b) => {
                switch(sortByValue) {
                    case 'name':
                        return a.name.localeCompare(b.name);
                    case 'temp':
                        return a.tempMin - b.tempMin;
                    case 'heat':
                        return b.heatOfFusion - a.heatOfFusion;
                    default:
                        return 0;
                }
            });
        }

        // Event Listeners
        applyFiltersBtn.addEventListener('click', () => {
            const filtered = filterPCMS();
            displayPCMs(sortPCMS(filtered, sortBy.value));
        });

        sortBtn.addEventListener('click', () => {
            const filtered = filterPCMS();
            const sorted = sortPCMS(filtered, sortBy.value);
            displayPCMs(sorted);
        });

        // Initial display 
        displayPCMs(pcmData);
    </script>
</body>
</html>
